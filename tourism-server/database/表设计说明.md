# 旅游网站数据库设计说明

## 整体设计思路

本数据库设计用于支持一个完整的旅游网站系统，包含前台用户系统和后台管理系统。设计以景点、攻略和游记为核心内容，并围绕用户交互行为（浏览、收藏、点赞、评论等）构建了完整的数据结构，支持包括协同过滤在内的推荐算法实现。

## 核心表结构

### 用户相关

1. **用户表(user)**
   - 存储用户基本信息，包括账号、密码、角色等
   - 通过`role`字段区分普通用户和管理员权限
   - 包含`interest_tags`字段存储用户兴趣标签，用于个性化推荐

### 内容相关

2. **景点表(attraction)**
   - 核心内容表之一，存储景点的详细信息
   - 关联`attraction_category`表和`region`表，标识景点类别和地理位置
   - 包含门票信息、开放时间等旅游实用信息

3. **攻略表(travel_guide)**
   - 存储旅游攻略内容
   - 通过`guide_attraction`关联表连接到多个景点
   - 包含路线地图等信息，支持分享旅游路线

4. **游记表(travel_note)**
   - 用户分享的旅游体验
   - 通过`travel_note_image`表存储游记相关图片
   - 通过`note_attraction`关联表连接到相关景点

### 分类与地区

5. **景点类别表(attraction_category)**
   - 对景点进行分类，如自然风光、历史文化等
   - 便于用户按类别浏览和搜索景点

6. **地区表(region)**
   - 采用省/市/区县三级结构
   - 自关联设计，通过`parent_id`构建地区层级关系

### 用户交互

7. **评论表(comment)**
   - 统一的评论系统，通过`target_type`区分评论对象类型
   - 支持评论回复功能，通过`parent_id`和`reply_to_id`构建评论树

8. **收藏表(collection)**
   - 记录用户收藏的内容
   - 通过`target_type`区分收藏对象类型

9. **点赞表(like)**
   - 记录用户点赞的内容
   - 通过`target_type`区分点赞对象类型

### 推荐系统相关

10. **用户行为记录表(user_behavior)**
    - 记录用户的各种行为，包括浏览、收藏、点赞、评论等
    - 为协同过滤推荐算法提供数据支持
    - 通过`weight`字段对不同行为赋予不同权重

11. **浏览历史表(browse_history)**
    - 记录用户的浏览历史
    - 用于个性化推荐和用户行为分析

### 其他功能表

12. **轮播图表(banner)**
    - 管理网站首页轮播图
    - 支持链接到景点、攻略或游记

13. **标签系统(tag, content_tag)**
    - 通用标签系统，支持对不同内容添加标签
    - 便于内容分类和用户兴趣匹配

14. **系统配置表(system_config)**
    - 存储网站基本配置
    - 包括推荐算法类型等可配置参数

15. **操作日志表(operation_log)**
    - 记录用户重要操作
    - 用于系统安全审计和问题排查

## 数据关系图

主要实体关系：
- 用户(1) ←→ 游记(N)：一个用户可以发布多篇游记
- 景点(1) ←→ 图片(N)：一个景点可以有多张图片
- 攻略(M) ←→ 景点(N)：多对多关系，通过`guide_attraction`关联表连接
- 游记(M) ←→ 景点(N)：多对多关系，通过`note_attraction`关联表连接
- 用户(M) ←→ 内容(N)：用户可以对多个内容进行评论、收藏、点赞等操作

## 设计特点

1. **统一的交互设计**：
   - 评论、收藏、点赞等功能采用统一的表结构设计，通过`target_type`区分目标对象类型
   - 减少重复代码，提高系统扩展性

2. **完善的索引设计**：
   - 为常用查询条件创建索引，优化查询性能
   - 外键关联确保数据一致性

3. **灵活的推荐系统支持**：
   - 记录用户行为数据，支持协同过滤等推荐算法
   - 可配置的推荐算法类型，便于系统优化

4. **完整的内容管理**：
   - 景点、攻略、游记等核心内容表设计完善
   - 支持图片管理、状态控制等功能

## 后续扩展建议

1. 可以考虑增加景点门票预订功能
2. 增加用户社交关系表，支持关注功能
3. 根据业务需求，可以扩展支付功能
4. 考虑增加景点评分详情表，支持多维度评分 